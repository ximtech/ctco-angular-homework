<app-blog-header/>

<div class="container my-5">
  <img [src]="post.image" class="img-fluid rounded mb-4" alt="Post Image" />

  <h2 class="fw-bold">{{ post.title }}</h2>

  <p class="text-muted mb-4">
    {{ post.date }} â€¢
    <a
      tabindex="0"
      class="text-decoration-underline text-primary"
      role="button"
      data-bs-toggle="popover"
      data-bs-trigger="focus"
      [attr.data-bs-content]="'Email: ' + authorInfo.email + '\n' + authorInfo.bio + '\nTwitter: ' + authorInfo.twitter"
      title="{{ authorInfo.name }}"
    >
      {{ authorInfo.name }}
    </a>
  </p>

  <div class="mb-5" *ngFor="let para of post.content">
    <p>{{ para }}</p>
  </div>

  <div class="my-4">
    <h5>Rate this post:</h5>
    <div class="star-rating">
      <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
        <i
          class="bi"
          [ngClass]="{
          'bi-star-fill': star <= (hoverRating || currentRating),
          'bi-star': star > (hoverRating || currentRating)
        }"
          (click)="setRating(star)"
          (mouseenter)="setHover(star)"
          (mouseleave)="clearHover()"
          style="font-size: 1.8rem; color: gold; cursor: pointer;"
        ></i>
      </ng-container>

      <span class="ms-2 text-muted small" *ngIf="currentRating">({{ currentRating }}/5)</span>
    </div>
  </div>

  <!-- Comments Section -->
  <div class="mb-5">
    <h4 class="mb-4">Comments</h4>

    <div class="mb-3" *ngFor="let comment of comments">
      <div class="p-3 rounded bg-light mb-2">
        <strong>{{ comment.author }}</strong>
        <div class="text-muted small">{{ comment.date }}</div>
        <div>{{ comment.content }}</div>
      </div>
    </div>
  </div>

  <!-- Comment Form -->
  <div>
    <h5 class="mb-3">Leave a Comment</h5>
    <form (ngSubmit)="submitComment()" #commentForm="ngForm">
      <div class="mb-3">
        <input [(ngModel)]="newComment.name" name="name" class="form-control" placeholder="Your Name" required />
      </div>
      <div class="mb-3">
        <textarea [(ngModel)]="newComment.message" name="message" class="form-control" rows="4" placeholder="Write your comment..." required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
  </div>

</div>
